.Dd August 18, 2023
.Dt SYSUPDATE 8
.Os Ragnarok
.Sh NAME
.Nm sysupdate
.Nd manage base system binary patches
.Sh SYNOPSIS
.Nm sysupdate
.Op Fl d | h | l | q | r
.Sh DESCRIPTION
.Nm
is a small utility to fetch, verify and update Ragnarok's base system
packages.
.Pp
When run without any options,
.Nm sysupdate
will fetch the latest available updates for a base system program, then
verify their signature with
.Xr signify 1
before extracting then installing the updated files.
.Pp
All operations prior to the extraction and installation of files are performed
as an unprivileged system user with no login shell access.
.Sh OPTIONS
The options are as follow:
.Bl -tag -width "-q"
.It Fl d
Download update without installing.
.It Fl h
Show help message.
.It Fl l
List installed updates.
.It Fl q
Check if there are any updates available.
.It Fl r
Revert an update.
.El
.Sh FILES
.Bl -tag -width "/var/db/updates/sysupdate.list.old" -compact
.It Pa /etc/sysupdate.conf
Configuration file containing the mirror path, Ragnarok's current version,
and the path to the public signify key (/usr/share/ragnarok-keys/ragnarok01.pub).
.It Pa /var/db/updates/sysupdate.list
File containing a list of currently installed updates.
.It Pa /var/db/updates/sysupdate.list.old
When a system component gets updated, the old sysupdate list is backed up
and can be used by the -r option to revert an update.
.El
.Sh EXIT STATUS
.Ex -std sysupdate
In particular, 1 indicates that the utility encountered and error, while 2 indicates
that no installable updates were found.
.Sh SEE ALSO
.Xr signify 1 ,
.Xr sysupdate.conf 5
.Sh AUTHORS
.Nm
was written by
.An Ian LeCorbeau Aq Mt I-LeCorbeau@protonmail.com .
.Sh CAVEATS
.Nm
is only meant to update base system packages and does not resolve dependencies,
as it assumes they are all satisfied.
